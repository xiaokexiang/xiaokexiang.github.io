<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Raspberrypi搭建指南 :: Keep Improving</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="前置工作 安装系统 使用Raspberry Pi Imager来烧录系统，这个工具是树莓派官网推荐烧录工具，内置了系统镜像下来，树莓派4B推荐使用64位系统。同时高级设置中支持设置账户密码（账户默认是pi，密码不设置默认为raspberry）和wifi密码，设置完成等待烧录完毕即可。
查找树莓派ip 使用Advanced IP Scanner工具来实现局域网ip扫描，通过制造商来筛选出ip地址。
开启root账户 # 输入root密码 sudo passwd root # 解锁root账户 sudo passwd --unlock root # 如果没安装ssh sudo apt install ssh # 如果出现password expiry information changed提示 # 修改sshd_config中的PermitRootLogin without-password为PermitRootLogin yes sudo vi /etc/ssh/sshd_config # 重启后使用root登陆 reboot 修改ubuntu镜像源 vi /etc/apt/sources.list deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy main restricted universe multiverse deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy-updates main restricted universe multiverse deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy-updates main restricted universe multiverse deb https://mirrors." />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://leejay.top/post/raspberrypi/" />




<link rel="stylesheet" href="https://leejay.top/assets/style.css">






<link rel="apple-touch-icon" href="https://leejay.top/img/favicon.png">

  <link rel="shortcut icon" href="https://leejay.top/img/favicon.png">



<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Raspberrypi搭建指南">
<meta property="og:description" content="树莓派是一种于2012年推出单板计算机。" />
<meta property="og:url" content="https://leejay.top/post/raspberrypi/" />
<meta property="og:site_name" content="Keep Improving" />

  
    <meta property="og:image" content="https://leejay.top/img/favicon.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

  <meta property="article:section" content="raspberrypi" />


  <meta property="article:published_time" content="2023-03-17 15:43:00 &#43;0800 &#43;0800" />










<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Code">

</head>
<body class="orange">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="https://leejay.top">
  <div class="logo">
    HelloWorld
  </div>
</a>

    </div>
    
  </div>
  
  
  <script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>

</header>


  <div class="content">
    
<div class="post">
  
  
    









<div class="toc" id="toc_id">

    <div class="page-header"><strong> ↓ 目录 ↓ </strong></div>

    <div id="page-scrollspy" class="toc-nav">

        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#%e5%89%8d%e7%bd%ae%e5%b7%a5%e4%bd%9c">
                    前置工作
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#%e5%ae%89%e8%a3%85%e7%b3%bb%e7%bb%9f">
                    安装系统
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#%e6%9f%a5%e6%89%be%e6%a0%91%e8%8e%93%e6%b4%beip">
                    查找树莓派ip
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#%e5%bc%80%e5%90%afroot%e8%b4%a6%e6%88%b7">
                    开启root账户
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#%e4%bf%ae%e6%94%b9ubuntu%e9%95%9c%e5%83%8f%e6%ba%90">
                    修改ubuntu镜像源
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#%e5%9b%ba%e5%ae%9aip">
                    固定ip
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#%e5%bf%85%e5%a4%87%e5%8c%85">
                    必备包
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#%e6%a0%91%e8%8e%93%e6%b4%be%e8%bd%af%e4%bb%b6%e5%ae%89%e8%a3%85">
                    树莓派软件安装
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#oh-my-zsh">
                    oh-my-zsh
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#frp">
                    frp
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#frpc-docker">
                    frpc-docker
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#tfoled">
                    TFOLED
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#tfoled-docker">
                    TFOLED-docker
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#docker">
                    docker
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#homeassistant">
                    homeassistant
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#jd">
                    jd
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#v2raya">
                    v2raya
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#samba">
                    samba
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        
        
        
        
        
        
        <ul class="nav">
            
        <ul class="nav">
            
        <ul class="nav">
            
            
            <li class="nav-item">
                <a class="nav-link" href="#icloud-backup">
                    icloud-backup
                </a>
            </li>
            
            
        </ul>
        
        </ul>
        
        </ul>
        
        
        
        

    </div>

</div>



  
  <h1 class="post-title">
    <a href="https://leejay.top/post/raspberrypi/">Raspberrypi搭建指南</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2023-03-17 
      </span>
    
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://leejay.top/tags/raspberrypi-/">raspberrypi </a>&nbsp;
    
  </span>
  

  

  

  <div class="post-content"><div>
        <h2 id="前置工作">前置工作<a href="#前置工作" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<h3 id="安装系统">安装系统<a href="#安装系统" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>使用<a href="https://downloads.raspberrypi.org/imager/imager_latest.exe">Raspberry Pi Imager</a>来烧录系统，这个工具是树莓派官网推荐烧录工具，内置了系统镜像下来，树莓派4B推荐使用64位系统。同时高级设置中支持设置账户密码（账户默认是pi，密码不设置默认为raspberry）和wifi密码，设置完成等待烧录完毕即可。</p>
<h3 id="查找树莓派ip">查找树莓派ip<a href="#查找树莓派ip" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>使用<a href="https://www.advanced-ip-scanner.com/cn/download/">Advanced IP Scanner</a>工具来实现局域网ip扫描，通过制造商来筛选出ip地址。</p>
<p><img src="https://image.leejay.top/typora/image-20230316092322969.png" alt="image-20230316092322969"></p>
<h3 id="开启root账户">开启root账户<a href="#开启root账户" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 输入root密码</span>
</span></span><span style="display:flex;"><span>sudo passwd root
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 解锁root账户</span>
</span></span><span style="display:flex;"><span>sudo passwd --unlock root
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 如果没安装ssh</span>
</span></span><span style="display:flex;"><span>sudo apt install ssh
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 如果出现password expiry information changed提示</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 修改sshd_config中的PermitRootLogin without-password为PermitRootLogin yes</span>
</span></span><span style="display:flex;"><span>sudo vi /etc/ssh/sshd_config
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 重启后使用root登陆</span>
</span></span><span style="display:flex;"><span>reboot
</span></span></code></pre></div><h3 id="修改ubuntu镜像源">修改ubuntu镜像源<a href="#修改ubuntu镜像源" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vi /etc/apt/sources.list
</span></span><span style="display:flex;"><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy main restricted universe multiverse
</span></span><span style="display:flex;"><span>deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy main restricted universe multiverse
</span></span><span style="display:flex;"><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy-updates main restricted universe multiverse
</span></span><span style="display:flex;"><span>deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy-updates main restricted universe multiverse
</span></span><span style="display:flex;"><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy-backports main restricted universe multiverse
</span></span><span style="display:flex;"><span>deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ jammy-backports main restricted universe multiverse
</span></span><span style="display:flex;"><span>deb http://ports.ubuntu.com/ubuntu-ports/ jammy-security main restricted universe multiverse
</span></span><span style="display:flex;"><span>deb-src http://ports.ubuntu.com/ubuntu-ports/ jammy-security main restricted universe multiverse
</span></span></code></pre></div><h3 id="固定ip">固定ip<a href="#固定ip" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span>-- <span style="color:#ae81ff">vim /etc/netplan/01-network-manager-all.yaml</span>
</span></span><span style="display:flex;"><span>-- <span style="color:#ae81ff">Let NetworkManager manage all devices on this system</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">network</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">version</span>: <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">renderer</span>: <span style="color:#ae81ff">NetworkManager</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">ethernets</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">eth0</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">addresses</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#ae81ff">192.168.10.100</span><span style="color:#ae81ff">/24</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">nameservers</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">addresses</span>: [<span style="color:#ae81ff">114.114.114.114</span>, <span style="color:#ae81ff">8.8.8.8</span>]
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">routes</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">to</span>: <span style="color:#ae81ff">default</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">via</span>: <span style="color:#ae81ff">192.168.10.1</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">wifis</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">wlan0</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">dhcp4</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">optional</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">addresses</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#ae81ff">192.168.10.99</span><span style="color:#ae81ff">/24</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">nameservers</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">addresses</span>: [<span style="color:#ae81ff">114.114.114.114</span>, <span style="color:#ae81ff">8.8.8.8</span>]
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">access-points</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;wifi名称&#34;</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">password</span>: <span style="color:#e6db74">&#34;wifi密码&#34;</span>
</span></span></code></pre></div><h3 id="必备包">必备包<a href="#必备包" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 安装macvlan必备，否则会出现failed to create the macvlan port: operation not supported.</span>
</span></span><span style="display:flex;"><span>apt install linux-modules-extra-raspi
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 安装raspi-config图形界面</span>
</span></span><span style="display:flex;"><span>apt install raspi-config
</span></span></code></pre></div><h2 id="树莓派软件安装">树莓派软件安装<a href="#树莓派软件安装" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<h3 id="oh-my-zsh">oh-my-zsh<a href="#oh-my-zsh" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 安装zsh</span>
</span></span><span style="display:flex;"><span>apt-get install zsh -y
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 安装oh-my-zsh</span>
</span></span><span style="display:flex;"><span>sh -c <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>curl -fsSL https://gitee.com/mirrors/oh-my-zsh/raw/master/tools/install.sh<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 安装插件 https://github.com/zsh-users</span>
</span></span><span style="display:flex;"><span>git clone https://ghproxy.com/github.com/zsh-users/zsh-syntax-highlighting.git <span style="color:#e6db74">${</span>ZSH_CUSTOM<span style="color:#66d9ef">:-</span>~/.oh-my-zsh/custom<span style="color:#e6db74">}</span>/plugins/zsh-syntax-highlighting
</span></span><span style="display:flex;"><span>git clone https://ghproxy.com/github.com/zsh-users/zsh-autosuggestions <span style="color:#e6db74">${</span>ZSH_CUSTOM<span style="color:#66d9ef">:-</span>~/.oh-my-zsh/custom<span style="color:#e6db74">}</span>/plugins/zsh-autosuggestions
</span></span><span style="display:flex;"><span>git clone https://ghproxy.com/github.com/zsh-users/zsh-completions <span style="color:#e6db74">${</span>ZSH_CUSTOM<span style="color:#66d9ef">:-</span><span style="color:#e6db74">${</span>ZSH<span style="color:#66d9ef">:-</span>~/.oh-my-zsh<span style="color:#e6db74">}</span>/custom<span style="color:#e6db74">}</span>/plugins/zsh-completions
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 修改配置</span>
</span></span><span style="display:flex;"><span>vim ~/.zshrc
</span></span><span style="display:flex;"><span>plugins<span style="color:#f92672">=(</span>git zsh-syntax-highlighting zsh-autosuggestions zsh-completions<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>bindkey <span style="color:#e6db74">&#39;;&#39;</span>    autosuggest-accept    <span style="color:#75715e"># 修改自动补全快捷键</span>
</span></span><span style="display:flex;"><span>bindkey <span style="color:#e6db74">&#39;\ej&#39;</span>  backward-char         <span style="color:#75715e"># ALT+j:向左移动一个单词</span>
</span></span><span style="display:flex;"><span>bindkey <span style="color:#e6db74">&#39;\el&#39;</span>  forward-char          <span style="color:#75715e"># ALT+l：向右移动一个单词</span>
</span></span><span style="display:flex;"><span>bindkey <span style="color:#e6db74">&#39;\ei&#39;</span>  up-line-or-history    <span style="color:#75715e"># ALT+i：向上移动一个单词</span>
</span></span><span style="display:flex;"><span>bindkey <span style="color:#e6db74">&#39;\ek&#39;</span>  down-line-or-history  <span style="color:#75715e"># ALT+k：向下移动一个单词</span>
</span></span><span style="display:flex;"><span>source ~/.zshrc
</span></span></code></pre></div><h3 id="frp">frp<a href="#frp" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>基于<a href="https://www.natfrp.com/">SakuraFrp</a>实现内网穿透</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 下载frpc</span>
</span></span><span style="display:flex;"><span>wget https://getfrp.sh/d/frpc_linux_arm64 &gt; frpc <span style="color:#f92672">&amp;&amp;</span> chmod +x frpc <span style="color:#f92672">&amp;&amp;</span> cp ./frpc /usr/local/bin/frpc
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 安装systemd服务</span>
</span></span><span style="display:flex;"><span>mkdir -p /usr/local/etc/natfrp
</span></span><span style="display:flex;"><span>vi /etc/systemd/system/frpc@.service
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 填写如下配置</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Description<span style="color:#f92672">=</span>SakuraFrp Service
</span></span><span style="display:flex;"><span>After<span style="color:#f92672">=</span>network.target
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Type<span style="color:#f92672">=</span>idle
</span></span><span style="display:flex;"><span>User<span style="color:#f92672">=</span>nobody
</span></span><span style="display:flex;"><span>Restart<span style="color:#f92672">=</span>on-failure
</span></span><span style="display:flex;"><span>RestartSec<span style="color:#f92672">=</span>60s
</span></span><span style="display:flex;"><span>ExecStart<span style="color:#f92672">=</span>/usr/local/bin/frpc -f %i
</span></span><span style="display:flex;"><span>WorkingDirectory<span style="color:#f92672">=</span>/usr/local/etc/natfrp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>WantedBy<span style="color:#f92672">=</span>multi-user.target
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 重载服务</span>
</span></span><span style="display:flex;"><span>systemctl daemon-reload
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 启动隧道</span>
</span></span><span style="display:flex;"><span>systemctl start frpc@<span style="color:#f92672">{</span>账户密钥<span style="color:#f92672">}</span>:<span style="color:#f92672">{</span>隧道id<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 查看服务</span>
</span></span><span style="display:flex;"><span>systemctl list-units <span style="color:#e6db74">&#34;frpc@*&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 设置服务开机启动</span>
</span></span><span style="display:flex;"><span>systemctl enable <span style="color:#f92672">{</span>服务名称<span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="frpc-docker">frpc-docker<a href="#frpc-docker" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-d --restart<span style="color:#f92672">=</span>always <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--name<span style="color:#f92672">=</span>frpc-web <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--pull<span style="color:#f92672">=</span>always <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>registry.cn-hongkong.aliyuncs.com/natfrp/frpc <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-f 账户密钥:隧道id --remote_control 远程密码
</span></span></code></pre></div><h3 id="tfoled">TFOLED<a href="#tfoled" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 编辑TFOLED服务</span>
</span></span><span style="display:flex;"><span>vi /etc/systemd/system/tfoled.service
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Unit<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Description<span style="color:#f92672">=</span>TFOLED Service
</span></span><span style="display:flex;"><span>After<span style="color:#f92672">=</span>multi-user.target
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Type<span style="color:#f92672">=</span>idle
</span></span><span style="display:flex;"><span>ExecStart<span style="color:#f92672">=</span>python /root/tfoled/TFOL.py
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Install<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>WantedBy<span style="color:#f92672">=</span>multi-user.target
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 重载服务</span>
</span></span><span style="display:flex;"><span>systemctl daemon-reload
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 启动服务</span>
</span></span><span style="display:flex;"><span>systemctl start tfoled.service
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 开机启动</span>
</span></span><span style="display:flex;"><span>systemctl enable tfoled.service
</span></span></code></pre></div><h3 id="tfoled-docker">TFOLED-docker<a href="#tfoled-docker" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run -itd --name tfoled <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --privileged <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --restart<span style="color:#f92672">=</span>always <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --name tfoled
</span></span><span style="display:flex;"><span>   --net<span style="color:#f92672">=</span>host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -v <span style="color:#e6db74">${</span>mount_path<span style="color:#e6db74">}</span>:/data <span style="color:#ae81ff">\ </span><span style="color:#75715e"># 将需要统计的磁盘挂在到/data目录</span>
</span></span><span style="display:flex;"><span>   -e upper<span style="color:#f92672">=</span><span style="color:#ae81ff">40</span>  <span style="color:#ae81ff">\ </span><span style="color:#75715e"># 风扇启动的温度，不填默认45</span>
</span></span><span style="display:flex;"><span>   -e lower<span style="color:#f92672">=</span><span style="color:#ae81ff">38</span> <span style="color:#ae81ff">\ </span><span style="color:#75715e"># 风扇停止的温度，不填默认42</span>
</span></span><span style="display:flex;"><span>   -d xiaokexiang/alpine-tfoled
</span></span></code></pre></div><h3 id="docker">docker<a href="#docker" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 安装证书</span>
</span></span><span style="display:flex;"><span>apt install apt-transport-https ca-certificates curl software-properties-common gnupg lsb-release
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 安装密钥</span>
</span></span><span style="display:flex;"><span>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 添加官方库</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;deb [arch=</span><span style="color:#66d9ef">$(</span>dpkg --print-architecture<span style="color:#66d9ef">)</span><span style="color:#e6db74"> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu </span><span style="color:#66d9ef">$(</span>lsb_release -cs<span style="color:#66d9ef">)</span><span style="color:#e6db74"> stable&#34;</span> | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 安装docker</span>
</span></span><span style="display:flex;"><span>apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 修改镜像源</span>
</span></span><span style="display:flex;"><span>curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io
</span></span></code></pre></div><h3 id="homeassistant">homeassistant<a href="#homeassistant" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 安装homeassistant</span>
</span></span><span style="display:flex;"><span>docker run -d <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --name homeassistant <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --privileged <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --restart<span style="color:#f92672">=</span>unless-stopped <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -e TZ<span style="color:#f92672">=</span>Asia/Shanghai <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v /root/homeassistant:/config <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --network<span style="color:#f92672">=</span>host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  homeassistant/raspberrypi4-64-homeassistant
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ha容器内部安装hacs</span>
</span></span><span style="display:flex;"><span>wget -q -O - https://install.hacs.xyz | bash -
</span></span></code></pre></div><h3 id="jd">jd<a href="#jd" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run -itd --name jd <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /root/jd/scripts:/jd/scripts <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /root/jd/log:/jd/log <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /root/jd/config:/jd/config <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--network<span style="color:#f92672">=</span>host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--restart<span style="color:#f92672">=</span>always <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>docker.io/afeirwu/jd_local
</span></span></code></pre></div><h3 id="v2raya">v2raya<a href="#v2raya" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run -d <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--restart<span style="color:#f92672">=</span>always <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--privileged <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--network<span style="color:#f92672">=</span>host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--name v2raya <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-e V2RAYA_LOG_FILE<span style="color:#f92672">=</span>/tmp/v2raya.log <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /lib/modules:/lib/modules:ro <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /etc/resolv.conf:/etc/resolv.conf <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /root/v2raya:/etc/v2raya <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>mzz2017/v2raya
</span></span></code></pre></div><h3 id="samba">samba<a href="#samba" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 挂载本机的/root/mount目录到容器的/mount目录</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 设置访问的账户名密码: username &amp; password 和共享目录:share</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 在window上通过\\ip\share访问并输入用户名密码即可</span>
</span></span><span style="display:flex;"><span>docker run -it --name samba <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-p 139:139 -p 445:445 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /root/mount:/mount  <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-d dperson/samba <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-w <span style="color:#e6db74">&#34;WORKGROUP&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-u <span style="color:#e6db74">&#34;username;password&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-s <span style="color:#e6db74">&#34;share;/mount/;yes;no;no;all;admin&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [name;path;browse;readonly;guest;users;admins;writelist;comment]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [name] is how it&#39;s called for clients</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [path] path to share</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [browsable] default:&#39;yes&#39; or &#39;no&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [readonly] default:&#39;yes&#39; or &#39;no&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [guest] allowed default:&#39;yes&#39; or &#39;no&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [users] allowed default:&#39;all&#39; or list of allowed users</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [admins] allowed default:&#39;none&#39; or list of admin users</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [writelist] list of users that can write to a RO share</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># [comment] description of share</span>
</span></span></code></pre></div><h3 id="icloud-backup">icloud-backup<a href="#icloud-backup" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run -it <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--name icloud-backup <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--hostname icloudpd_boredazfcuk <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--network bridge <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--restart<span style="color:#f92672">=</span>always <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env auth_china<span style="color:#f92672">=</span>True <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env apple_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>your_icloud<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env authentication_type<span style="color:#f92672">=</span>2FA <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env folder_structure<span style="color:#f92672">={</span>:%Y/%m<span style="color:#f92672">}</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env auto_delete<span style="color:#f92672">=</span>True <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env synchronisation_interval<span style="color:#f92672">=</span><span style="color:#ae81ff">43200</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env icloud_china<span style="color:#f92672">=</span>True <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env TZ<span style="color:#f92672">=</span>Asia/Shanghai <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>--env download_path<span style="color:#f92672">=</span>/home/root/iCloud <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /mnt/usb2-1/iCloud/config:/config <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>-v /mnt/usb2-1/iCloud/download:/home/root/iCloud <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>pjoc/docker-icloudpd:master
</span></span></code></pre></div><blockquote>
<p>启动成功后，进入容器执行<code>sync-icloud.sh</code>脚本，用来手动登陆icloud，登陆成功后重启容器即可。</p>
</blockquote>

      </div></div>

  
  
<div class="pagination">
    <div class="pagination__title">
        <span class="pagination__title-h">其他文章</span>
        <hr />
    </div>
    <div class="pagination__buttons">
        
        <span class="button previous">
            <a href="https://leejay.top/post/go/">
                <span class="button__icon">←</span>
                <span class="button__text">Go语言实战</span>
            </a>
        </span>
        
        
        <span class="button next">
            <a href="https://leejay.top/post/elasticsearch/">
                <span class="button__text">Elasticsearch操作文档</span>
                <span class="button__icon">→</span>
            </a>
        </span>
        
    </div>
</div>

  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span><a rel="nofollow" href="https://beian.miit.gov.cn/" target="_blank">苏ICP备18050258号-1</a></span>
    
        
      </div>
  </div>
</footer>

<script src="https://leejay.top/assets/main.js"></script>
<script src="https://leejay.top/assets/prism.js"></script>






  
</div>

</body>
</html>
