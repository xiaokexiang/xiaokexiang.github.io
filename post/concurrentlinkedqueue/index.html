<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>ConcurrentLinkedQueue</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="ConcurrentLinkedQueue ç‰¹æ€§  åŸºäºé“¾è¡¨çš„æ— ç•Œçº¿ç¨‹å®‰å…¨é˜Ÿåˆ—ã€‚ é˜Ÿåˆ—é¡ºåºæ˜¯FIFOå…ˆè¿›å…ˆå‡ºçš„é¡ºåºã€‚é˜Ÿé¦–æ˜¯æ’å…¥æœ€ä¹…çš„å…ƒç´ ï¼Œé˜Ÿå°¾æ˜¯æœ€æ–°çš„å…ƒç´ ã€‚ ä½¿ç”¨åœºæ™¯ï¼šè®¸å¤šçº¿ç¨‹å°†å…±äº«å¯¹ä¸€ä¸ªå…¬å…±é›†åˆçš„è®¿é—®ï¼Œä¸æ”¯æŒnullã€‚ å†…éƒ¨çš„å¹¶å‘æ“ä½œé€šè¿‡è‡ªæ—‹ &#43; CASå®ç°ã€‚ä¸LinkedBlockingQueueç‹¬å é”ä¸åŒã€‚  æ„é€  public class ConcurrentLinkedQueue&amp;lt;E&amp;gt; extends AbstractQueue&amp;lt;E&amp;gt; implements Queue&amp;lt;E&amp;gt;, java.io.Serializable { // headå¤´èŠ‚ç‚¹  private transient volatile Node&amp;lt;E&amp;gt; head; // tailå°¾èŠ‚ç‚¹  private transient volatile Node&amp;lt;E&amp;gt; tail; // ä¸ç”¨ä¼ é€’åˆå§‹å®¹é‡  public ConcurrentLinkedQueue() { // åˆå§‹åŒ–headå’Œtailï¼Œå“¨å…µèŠ‚ç‚¹  head = tail = new Node&amp;lt;E&amp;gt;(null); } // ç§æœ‰é™æ€å†…éƒ¨ç±»ï¼Œç”¨äºæ„æˆé“¾è¡¨çš„èŠ‚ç‚¹ï¼ˆå•å‘é“¾è¡¨ï¼‰  // æ ¸å¿ƒæ˜¯é€šè¿‡CASæ¥å®ç°å¹¶å‘æ“ä½œ  private static class Node&amp;lt;E&amp;gt; { volatile E item; // æ ‡è®°nextèŠ‚ç‚¹ volatileä¿®é¥°çš„  volatile Node&amp;lt;E&amp;gt; next; // æ„é€   Node(E item) { // CASæ·»åŠ item  UNSAFE."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<meta name="google-site-verification" content="e1ELBPEvOV5kwQNtzaLcNt-3iZy83eiNhSZkHhQPecs" />
<meta name="baidu-site-verification" content="aNoX6MUEHW" />

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css">
<link rel="canonical" href="https://leejay.top/post/concurrentlinkedqueue/" />

<script type="text/javascript"
        async
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
        >
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] },
    'HTML-CSS': {
        showMathMenu: false 
    }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>




<link rel="stylesheet" href="https://leejay.top/assets/style.css">




<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://leejay.top/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="https://leejay.top/img/favicon.png">



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ConcurrentLinkedQueue"/>
<meta name="twitter:description" content="`ConcurrentLinkedQueue`æ˜¯ä½¿ç”¨`è‡ªæ—‹å’ŒCAS`æ¥å®ç°çš„éé˜»å¡çš„æœ‰åºé˜Ÿåˆ—ï¼Œæ˜¯LinkedListçš„çº¿ç¨‹å®‰å…¨å˜ä½“ã€‚"/>



<meta property="og:title" content="ConcurrentLinkedQueue" />
<meta property="og:description" content="`ConcurrentLinkedQueue`æ˜¯ä½¿ç”¨`è‡ªæ—‹å’ŒCAS`æ¥å®ç°çš„éé˜»å¡çš„æœ‰åºé˜Ÿåˆ—ï¼Œæ˜¯LinkedListçš„çº¿ç¨‹å®‰å…¨å˜ä½“ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://leejay.top/post/concurrentlinkedqueue/" />
<meta property="article:published_time" content="2020-07-11T14:53:34+08:00" />
<meta property="article:modified_time" content="2020-07-11T14:53:34+08:00" /><meta property="og:site_name" content="Aurora" />






  </head>
  <body class="">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a href="https://leejay.top" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="https://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367"/>
</svg></span>
    <span class="logo__text">Aurora</span>
    <span class="logo__cursor"></span>
    <span class="logo__cursor2"></span>
  
</a>
    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/categories">Categories</a></li>
        
      
        
          <li><a href="/tags">Tags</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/categories">Categories</a></li>
      
    
      
        <li><a href="/tags">Tags</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="https://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <div class="post">
    <h1 class="post-title"><a href="https://leejay.top/post/concurrentlinkedqueue/">ConcurrentLinkedQueue</a></h1>
    <div class="post-meta">
      
        <span class="post-date">
          2020-07-11
        </span>

        
          
        
      

      
      
    </div>

    
      <span class="post-tags">
        
        ğŸ–<a href="https://leejay.top/tags/concurrentlinkedqueue/">ConcurrentLinkedQueue </a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      
      <h3 id="concurrentlinkedqueue">ConcurrentLinkedQueue</h3>
<h4 id="ç‰¹æ€§">ç‰¹æ€§</h4>
<ul>
<li>åŸºäºé“¾è¡¨çš„æ— ç•Œçº¿ç¨‹å®‰å…¨é˜Ÿåˆ—ã€‚</li>
<li>é˜Ÿåˆ—é¡ºåºæ˜¯<code>FIFO</code>å…ˆè¿›å…ˆå‡ºçš„é¡ºåºã€‚é˜Ÿé¦–æ˜¯æ’å…¥æœ€ä¹…çš„å…ƒç´ ï¼Œé˜Ÿå°¾æ˜¯æœ€æ–°çš„å…ƒç´ ã€‚</li>
<li>ä½¿ç”¨åœºæ™¯ï¼š<code>è®¸å¤šçº¿ç¨‹å°†å…±äº«å¯¹ä¸€ä¸ªå…¬å…±é›†åˆçš„è®¿é—®ï¼Œä¸æ”¯æŒnull</code>ã€‚</li>
<li>å†…éƒ¨çš„å¹¶å‘æ“ä½œé€šè¿‡<code>è‡ªæ—‹ + CAS</code>å®ç°ã€‚ä¸<code>LinkedBlockingQueue</code>ç‹¬å é”ä¸åŒã€‚</li>
</ul>
<h4 id="æ„é€ ">æ„é€ </h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ConcurrentLinkedQueue</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">extends</span> AbstractQueue<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span>
        <span style="color:#66d9ef">implements</span> Queue<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;,</span> java<span style="color:#f92672">.</span><span style="color:#a6e22e">io</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Serializable</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// headå¤´èŠ‚ç‚¹
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">transient</span> <span style="color:#66d9ef">volatile</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> head<span style="color:#f92672">;</span>
	<span style="color:#75715e">// tailå°¾èŠ‚ç‚¹
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">transient</span> <span style="color:#66d9ef">volatile</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> tail<span style="color:#f92672">;</span>
	<span style="color:#75715e">// ä¸ç”¨ä¼ é€’åˆå§‹å®¹é‡
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">ConcurrentLinkedQueue</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// åˆå§‹åŒ–headå’Œtailï¼Œå“¨å…µèŠ‚ç‚¹
</span><span style="color:#75715e"></span>        head <span style="color:#f92672">=</span> tail <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
    <span style="color:#75715e">// ç§æœ‰é™æ€å†…éƒ¨ç±»ï¼Œç”¨äºæ„æˆé“¾è¡¨çš„èŠ‚ç‚¹ï¼ˆå•å‘é“¾è¡¨ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// æ ¸å¿ƒæ˜¯é€šè¿‡CASæ¥å®ç°å¹¶å‘æ“ä½œ
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span><span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">volatile</span> E item<span style="color:#f92672">;</span>
        <span style="color:#75715e">// æ ‡è®°nextèŠ‚ç‚¹ volatileä¿®é¥°çš„
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">volatile</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> next<span style="color:#f92672">;</span>
		<span style="color:#75715e">// æ„é€ 
</span><span style="color:#75715e"></span>        Node<span style="color:#f92672">(</span>E item<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// CASæ·»åŠ item
</span><span style="color:#75715e"></span>            UNSAFE<span style="color:#f92672">.</span><span style="color:#a6e22e">putObject</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> itemOffset<span style="color:#f92672">,</span> item<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
		<span style="color:#75715e">// CASä¿®æ”¹itemï¼ˆæŠŠcmpè®¾ç½®æˆvalï¼‰
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">casItem</span><span style="color:#f92672">(</span>E cmp<span style="color:#f92672">,</span> E val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> UNSAFE<span style="color:#f92672">.</span>
                <span style="color:#a6e22e">compareAndSwapObject</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> itemOffset<span style="color:#f92672">,</span> cmp<span style="color:#f92672">,</span> val<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
		<span style="color:#75715e">// CASè®¾ç½®nextæŒ‡é’ˆ
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">lazySetNext</span><span style="color:#f92672">(</span>Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            UNSAFE<span style="color:#f92672">.</span><span style="color:#a6e22e">putOrderedObject</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> nextOffset<span style="color:#f92672">,</span> val<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
		<span style="color:#75715e">// CASä¿®æ”¹nextèŠ‚ç‚¹
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">casNext</span><span style="color:#f92672">(</span>Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> cmp<span style="color:#f92672">,</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> val<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> UNSAFE
                <span style="color:#f92672">.</span><span style="color:#a6e22e">compareAndSwapObject</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> nextOffset<span style="color:#f92672">,</span> cmp<span style="color:#f92672">,</span> val<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> sun<span style="color:#f92672">.</span><span style="color:#a6e22e">misc</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Unsafe</span> UNSAFE<span style="color:#f92672">;</span>
        <span style="color:#75715e">// NodeèŠ‚ç‚¹ä¸­itemåç§»é‡
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">long</span> itemOffset<span style="color:#f92672">;</span>
        <span style="color:#75715e">// NodeèŠ‚ç‚¹ä¸­nextçš„åç§»é‡
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">long</span> nextOffset<span style="color:#f92672">;</span>

        <span style="color:#66d9ef">static</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
                UNSAFE <span style="color:#f92672">=</span> sun<span style="color:#f92672">.</span><span style="color:#a6e22e">misc</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Unsafe</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getUnsafe</span><span style="color:#f92672">();</span>
                Class<span style="color:#f92672">&lt;?&gt;</span> k <span style="color:#f92672">=</span> Node<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">;</span>
                itemOffset <span style="color:#f92672">=</span> UNSAFE<span style="color:#f92672">.</span><span style="color:#a6e22e">objectFieldOffset</span>
                    <span style="color:#f92672">(</span>k<span style="color:#f92672">.</span><span style="color:#a6e22e">getDeclaredField</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;item&#34;</span><span style="color:#f92672">));</span>
                nextOffset <span style="color:#f92672">=</span> UNSAFE<span style="color:#f92672">.</span><span style="color:#a6e22e">objectFieldOffset</span>
                    <span style="color:#f92672">(</span>k<span style="color:#f92672">.</span><span style="color:#a6e22e">getDeclaredField</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;next&#34;</span><span style="color:#f92672">));</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>Exception e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> Error<span style="color:#f92672">(</span>e<span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<ol>
<li>Nodeæ˜¯ç§æœ‰é™æ€å†…éƒ¨ç±»ï¼Œå…¶ä¸­å®šä¹‰äº†<code>itemå’Œnextçš„CASæ–¹æ³•</code>ã€‚</li>
<li>å› ä¸ºä¸æ˜¯é˜»å¡é˜Ÿåˆ—ï¼Œæ‰€ä»¥<code>ä¸å­˜åœ¨å®¹é‡å­—æ®µ</code>ï¼Œä¹Ÿ<code>ä¸éœ€è¦æŒ‡å®šå¤§å°</code>ã€‚</li>
</ol>
</blockquote>
<hr>
<h3 id="æç¤º">æç¤º</h3>
<blockquote>
<p>å¦‚æœä½¿ç”¨çš„æ˜¯ideaï¼Œä¼šå‡ºç°<code>headè«åå¥‡å¦™è¢«ä¿®æ”¹ï¼ŒèŠ‚ç‚¹å¼•ç”¨æŒ‡å‘è‡ªå·±çš„é—®é¢˜</code>ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šhttps://blog.csdn.net/AUBREY_CR7/article/details/106331490</p>
</blockquote>
<hr>
<h3 id="offer">offer</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// æ·»åŠ èŠ‚ç‚¹åˆ°é˜Ÿåˆ—ä¸­
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>E e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// è€ä¸€å¥—ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºæŠ›å‡ºNPE
</span><span style="color:#75715e"></span>    checkNotNull<span style="color:#f92672">(</span>e<span style="color:#f92672">);</span>
    <span style="color:#75715e">// åˆå§‹åŒ–èŠ‚ç‚¹
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">final</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> newNode <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;(</span>e<span style="color:#f92672">);</span>
	<span style="color:#75715e">// è‡ªæ—‹ä»é˜Ÿå°¾å¼€å§‹,è¿™é‡Œåªæœ‰åˆå§‹åŒ–æ¡ä»¶ï¼Œæ²¡æœ‰å¾ªç¯ç»“æŸæ¡ä»¶
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> t <span style="color:#f92672">=</span> tail<span style="color:#f92672">,</span> p <span style="color:#f92672">=</span> t<span style="color:#f92672">;;)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// pè¢«è®¤ä¸ºæ˜¯çœŸæ­£çš„å°¾èŠ‚ç‚¹,è·å–p.nextèŠ‚ç‚¹
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// å› ä¸ºæ­¤æ—¶æœ‰å¯èƒ½æœ‰å…¶ä»–çº¿ç¨‹æˆä¸ºtail
</span><span style="color:#75715e"></span>        Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> q <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">;</span>
        <span style="color:#75715e">// q = null è¯´æ˜æ­¤åˆ»på°±æ˜¯tailå°¾èŠ‚ç‚¹
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>q <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// CASå°†newNodeè®¾ä¸ºpçš„nextèŠ‚ç‚¹ï¼Œå¤±è´¥å°±ç»§ç»­è‡ªæ—‹
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p<span style="color:#f92672">.</span><span style="color:#a6e22e">casNext</span><span style="color:#f92672">(</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> newNode<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">// p = t = tail = Node(next = newNode)
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> t<span style="color:#f92672">)</span>
                    <span style="color:#75715e">// CASè®¾ç½®tailå°¾èŠ‚ç‚¹ï¼Œå³ä½¿å¤±è´¥äº†ï¼Œ
</span><span style="color:#75715e"></span>                    casTail<span style="color:#f92672">(</span>t<span style="color:#f92672">,</span> newNode<span style="color:#f92672">);</span>
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">==</span> q<span style="color:#f92672">)</span>
            <span style="color:#75715e">// å¦‚æœtailæ­¤æ—¶è¢«å…¶ä»–çº¿ç¨‹æ”¹å˜äº†ï¼Œé‚£ä¹ˆp = tæˆç«‹
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// æ²¡æ”¹å˜ t = head
</span><span style="color:#75715e"></span>            p <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>t <span style="color:#f92672">!=</span> <span style="color:#f92672">(</span>t <span style="color:#f92672">=</span> tail<span style="color:#f92672">))</span> <span style="color:#f92672">?</span> t <span style="color:#f92672">:</span> head<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">else</span>
            <span style="color:#75715e">// æ­¤è¡Œä»£ç ç”¨äºæ‰¾åˆ°çœŸæ­£çš„å°¾èŠ‚ç‚¹ï¼Œèµ‹äºˆpï¼Œ
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// å› ä¸ºtailæ›´æ–°ä¸åŠæ—¶ï¼Œæ¯æ·»åŠ ä¸¤ä¸ªæ‰ä¼šæ›´æ–°tail
</span><span style="color:#75715e"></span>            p <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> t <span style="color:#f92672">&amp;&amp;</span> t <span style="color:#f92672">!=</span> <span style="color:#f92672">(</span>t <span style="color:#f92672">=</span> tail<span style="color:#f92672">))</span> <span style="color:#f92672">?</span> t <span style="color:#f92672">:</span> q<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
<span style="color:#75715e">// æµ‹è¯•ä»£ç 
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> ConcurrentLinkedQueue<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> QUEUE <span style="color:#f92672">=</span> 
        						<span style="color:#66d9ef">new</span> ConcurrentLinkedQueue<span style="color:#f92672">&lt;&gt;();</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        QUEUE<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>11<span style="color:#f92672">);</span>
        QUEUE<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>22<span style="color:#f92672">);</span>
        QUEUE<span style="color:#f92672">.</span><span style="color:#a6e22e">offer</span><span style="color:#f92672">(</span>33<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<p>æ¨è®ºï¼š<code>æ¯æ’å…¥ä¸¤ä¸ªèŠ‚ç‚¹ï¼ŒtailæŒ‡é’ˆæ‰ä¼šç§»åŠ¨ï¼ŒæŒ‡å‘ç¬¬äºŒä¸ªæ’å…¥çš„èŠ‚ç‚¹</code>ã€‚</p>
<ol>
<li><code>tè¡¨ç¤ºåˆšè¿›å…¥ä»£ç æ—¶çš„å°¾èŠ‚ç‚¹ï¼Œpç”¨æ¥è¡¨ç¤ºé˜Ÿåˆ—çœŸæ­£çš„å°¾èŠ‚ç‚¹</code>ï¼Œå½“<code>p.next = null</code>æˆç«‹æ—¶è¯´æ˜pæ­¤æ—¶æŒ‡å‘çœŸæ­£çš„å°¾èŠ‚ç‚¹ï¼Œå¦‚æœä¸æˆç«‹è¯´æ˜pæ­¤æ—¶ä¸æ˜¯çœŸæ­£çš„å°¾èŠ‚ç‚¹ï¼Œéœ€è¦æŸ¥æ‰¾çœŸæ­£çš„å°¾èŠ‚ç‚¹å¹¶å°†å®ƒèµ‹äºˆpï¼Œä¿è¯æ¯æ¬¡æ–°å¢çš„èŠ‚ç‚¹éƒ½åœ¨é˜Ÿå°¾ã€‚</li>
<li><code>p = (p != t &amp;&amp; t != (t = tail)) ? t : q;</code>ï¼Œé’ˆå¯¹è¿™ä¸ªä»£ç ï¼Œæˆ‘ä»¬å‡è®¾ä¸€ä¸ªåœºæ™¯ï¼Œé˜Ÿåˆ—ä¸­å·²ç»æœ‰ç¬¬ä¸€ä¸ªèŠ‚ç‚¹äº†ï¼ˆæ­¤æ—¶tailæŒ‡é’ˆè¿˜æ²¡ä¿®æ”¹ï¼‰ï¼Œæ­¤æ—¶çº¿ç¨‹Aå’Œçº¿ç¨‹BåŒæ—¶è¿›å…¥è¯¥æ®µè‡ªæ—‹ä»£ç å‡†å¤‡æ‰§è¡Œï¼š</li>
<li>çº¿ç¨‹Aåˆ¤æ–­<code>p.next != null</code>ï¼Œæ‰§è¡Œelseä¸­ä»£ç ï¼Œæ­¤æ—¶<code>p != t</code>ä¸æˆç«‹ï¼Œæ‰€ä»¥<code>p = q</code>åç»§ç»­å¾ªç¯æ‰§è¡Œï¼Œçº¿ç¨‹Aç»§ç»­åˆ¤æ–­<code>p.next = q = null</code>æˆç«‹ï¼Œæ‰€ä»¥æ‰§è¡Œ<code>p.casNext</code>ï¼Œæ­¤æ—¶çº¿ç¨‹Açš„å€¼åŠ å…¥äº†é˜Ÿåˆ—ï¼Œæ­¤æ—¶<code>p != t</code>æˆç«‹ï¼Œå‡†å¤‡æ‰§è¡ŒcasTailã€‚</li>
<li>æ­¤æ—¶<code>åˆ‡æ¢ä¸ºçº¿ç¨‹B</code>ï¼Œçº¿ç¨‹Båˆ¤æ–­<code>p.next != null</code>ï¼Œæ‰§è¡Œelseä¸­<code>p != t</code>ä¸æˆç«‹ï¼Œæ‰€ä»¥<code>p = q</code>åç»§ç»­å¾ªç¯ï¼Œå› ä¸ºçº¿ç¨‹Açš„å€¼åŠ å…¥äº†é˜Ÿåˆ—ï¼Œæ‰€ä»¥<code>q = p.next != null</code>ï¼Œæ‰§è¡Œelseä¸­ä»£ç ï¼Œæ­¤æ—¶<code>p != t</code>æˆç«‹ï¼Œå‡†å¤‡æ‰§è¡Œ<code>t != (t = tail)</code>ã€‚</li>
<li>åˆ‡æ¢å›çº¿ç¨‹Aï¼Œ<code>çº¿ç¨‹Aæ‰§è¡ŒcasTaiï¼ŒtailæŒ‡é’ˆè¢«ä¿®æ”¹</code>ï¼Œçº¿ç¨‹Aè¿”å›trueé€€å‡ºå¾ªç¯ï¼Œåˆ‡æ¢åˆ°çº¿ç¨‹Bï¼Œåˆ¤æ–­<code>t != (t = tail)</code>æˆç«‹ï¼Œæ­¤æ—¶<code>p = t = æ›´æ”¹åçš„tail</code>ï¼Œç»§ç»­å¾ªç¯æ‰§è¡Œ<code>p.next = q = null</code>æˆç«‹ï¼Œæ‰§è¡ŒcasNextï¼Œå°†çº¿ç¨‹Açš„å€¼ä¹ŸåŠ å…¥é˜Ÿåˆ—ä¸­ã€‚</li>
<li><code>p == q</code>éœ€è¦ç»“åˆ<code>poll</code>æ–¹æ³•å»è§£æ(ä¸€äº›çº¿ç¨‹offerï¼Œä¸€äº›poll)ï¼Œå½“å®ƒæˆç«‹çš„æ—¶å€™è¯´æ˜<code>p.next = p = q</code>ï¼Œè¯´æ˜è¿™ç§èŠ‚ç‚¹æ˜¯å“¨å…µèŠ‚ç‚¹ï¼Œè¡¨ç¤ºä¸ºéœ€è¦åˆ é™¤æˆ–è€…è¿‡æ»¤çš„èŠ‚ç‚¹ã€‚</li>
</ol>
</blockquote>
<h3 id="offeræ‰§è¡Œæµç¨‹">offeræ‰§è¡Œæµç¨‹</h3>
<p><img src="https://image.leejay.top/image/20200710/XWBJx3hhhzX3.jpg?imageslim" alt=""></p>
<hr>
<h3 id="poll">poll</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// åˆ é™¤é“¾è¡¨çš„å¤´èŠ‚ç‚¹å¹¶è¿”å›è¯¥èŠ‚ç‚¹çš„item
</span><span style="color:#75715e"></span><span style="color:#66d9ef">public</span> E <span style="color:#a6e22e">poll</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    restartFromHead<span style="color:#f92672">:</span>
    <span style="color:#75715e">// è‡ªæ—‹
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(;;)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// head = h = p
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> h <span style="color:#f92672">=</span> head<span style="color:#f92672">,</span> p <span style="color:#f92672">=</span> h<span style="color:#f92672">,</span> q<span style="color:#f92672">;;)</span> <span style="color:#f92672">{</span>
            E item <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">item</span><span style="color:#f92672">;</span>
			<span style="color:#75715e">// å¦‚æœitemä¸ä¸ºnullï¼Œé‚£ä¹ˆCASä¿®æ”¹ä¸ºnull
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>item <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">&amp;&amp;</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">casItem</span><span style="color:#f92672">(</span>item<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">// CASæˆåŠŸåä¼šæ‰§è¡Œåˆ°è¿™é‡Œ
</span><span style="color:#75715e"></span>                <span style="color:#75715e">// headä¹Ÿæ˜¯æ¯ä¸¤ä¸ªèŠ‚ç‚¹æ›´æ–°ä¸€æ¬¡
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">!=</span> h<span style="color:#f92672">)</span> 
                    <span style="color:#75715e">// p != h è¯´æ˜æ­¤æ—¶éœ€è¦æ›´æ–°headæ ‡è¯†
</span><span style="color:#75715e"></span>                    updateHead<span style="color:#f92672">(</span>h<span style="color:#f92672">,</span> <span style="color:#f92672">((</span>q <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">)</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">?</span> q <span style="color:#f92672">:</span> p<span style="color:#f92672">);</span>
                <span style="color:#75715e">// ç›´æ¥è¿”å›item
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> item<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#75715e">// å¦‚æœp.item = null ä¸” p.next= null
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">((</span>q <span style="color:#f92672">=</span> p<span style="color:#f92672">.</span><span style="color:#a6e22e">next</span><span style="color:#f92672">)</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#75715e">// æ›´æ–°headèŠ‚ç‚¹
</span><span style="color:#75715e"></span>                updateHead<span style="color:#f92672">(</span>h<span style="color:#f92672">,</span> p<span style="color:#f92672">);</span>
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
            <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">==</span> q<span style="color:#f92672">)</span>
                <span style="color:#66d9ef">continue</span> restartFromHead<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">else</span>
                p <span style="color:#f92672">=</span> q<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>

<span style="color:#66d9ef">final</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">updateHead</span><span style="color:#f92672">(</span>Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> h<span style="color:#f92672">,</span> Node<span style="color:#f92672">&lt;</span>E<span style="color:#f92672">&gt;</span> p<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// å¦‚æœè¦æ›´æ–°çš„èŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹ä¸åŒï¼Œé‚£ä¹ˆå°è¯•æ›´æ–°headå¤´èŠ‚ç‚¹ï¼Œæ³¨æ„hèŠ‚ç‚¹ä¸ä¼šå˜
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>h <span style="color:#f92672">!=</span> p <span style="color:#f92672">&amp;&amp;</span> casHead<span style="color:#f92672">(</span>h<span style="color:#f92672">,</span> p<span style="color:#f92672">))</span>
        <span style="color:#75715e">// å°†åŸheadçš„èŠ‚ç‚¹nextæŒ‡é’ˆæŒ‡å‘è‡ªå·±ï¼Œä¾¿äºGC
</span><span style="color:#75715e"></span>        h<span style="color:#f92672">.</span><span style="color:#a6e22e">lazySetNext</span><span style="color:#f92672">(</span>h<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<p>æ¨è®ºï¼š<code>æ¯ç§»é™¤ä¸¤ä¸ªèŠ‚ç‚¹ï¼ŒheadæŒ‡é’ˆä¼šç§»åŠ¨ä¸€æ¬¡</code>ã€‚</p>
<ol>
<li>
<p>å’Œofferæ–¹æ³•ä¸€æ ·ï¼Œ<code>hä¸ºåˆšè¿›å…¥ä»£ç çš„å¤´èŠ‚ç‚¹ï¼ŒpèŠ‚ç‚¹ç”¨æ¥è¡¨ç¤ºä¸ºçœŸæ­£è¦åˆ é™¤çš„å¤´èŠ‚ç‚¹</code>ã€‚</p>
</li>
<li>
<p>åªæœ‰å½“å½“å‰headèŠ‚ç‚¹çš„<code>item!=null</code>æ—¶æ‰ä¼šå°è¯•å»CASä¿®æ”¹ï¼Œè‹¥<code>item = null</code>çš„èŠ‚ç‚¹ä¼šé€šè¿‡<code>q = p.next</code>å»æŸ¥æ‰¾ã€‚æ‰¾åˆ°åæ‰§è¡Œ<code>updateHead</code>ï¼Œç§»é™¤hèŠ‚ç‚¹å¹¶è®¾ç½®æ–°çš„headèŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p><code>p == q</code>ä½•æ—¶æˆç«‹ï¼šçº¿ç¨‹Aå’Œçº¿ç¨‹BåŒæ—¶è·å–é˜Ÿåˆ—ä¸­çš„å…ƒç´ ï¼Œå‡è®¾çº¿ç¨‹Bç§»é™¤äº†èŠ‚ç‚¹å¹¶å°†å…¶è®¾ä¸º<code>å“¨å…µèŠ‚ç‚¹ï¼ˆh.next = hï¼‰</code>ï¼Œæ­¤æ—¶çº¿ç¨‹Aåˆ¤æ–­<code>item != null</code>ä¸æˆç«‹ï¼Œç»§ç»­åˆ¤æ–­<code>p == q</code>æˆç«‹ã€‚</p>
</li>
<li>
<p>å†ç»“åˆofferæ–¹æ³•ä¸­ä½•æ—¶<code>p == q</code>ï¼š</p>
<ol>
<li><code>æ­¤æ—¶é˜Ÿåˆ—ä¸­head=tail(item=null, next=node1)ï¼Œnode1=(item!=null,next=null)</code>ï¼Œæ­¤æ—¶çº¿ç¨‹Aå°è¯•offeræ•°æ®ï¼Œçº¿ç¨‹Bå°è¯•pollæ•°æ®ï¼Œçº¿ç¨‹Aå…ˆè¿›å…¥å¾ªç¯ï¼Œåˆ‡æ¢ä¸ºçº¿ç¨‹Bï¼Œæ­¤æ—¶<code>h = head = p</code>ï¼Œç»§ç»­æ‰§è¡Œ<code>p.item = null</code>ï¼Œåˆ¤æ–­<code>q = p.next != null</code>ä¸”<code>p != q</code>ï¼Œæ‰€ä»¥æ‰§è¡Œelseï¼š<code>p = q</code>ï¼Œç»§ç»­å¾ªç¯ï¼Œ<code>p.item != null</code>ï¼Œå°è¯•CASä¿®æ”¹ï¼Œä¸”<code>p != h</code>ï¼Œæ‰€ä»¥æ‰§è¡Œ<code>updateHeadå°†hæ”¹ä¸ºå“¨å…µèŠ‚ç‚¹</code>ã€‚</li>
<li>æ­¤æ—¶çº¿ç¨‹åˆ‡æ¢å›Aï¼Œçº¿ç¨‹æ‰§è¡Œ<code>q = p.nextï¼ˆæ­¤æ—¶på·²ç»æ˜¯å“¨å…µèŠ‚ç‚¹äº†ï¼‰</code>åˆ¤æ–­<code>q != null</code>ï¼Œç»§ç»­åˆ¤æ–­<code>p = q</code>æˆç«‹ï¼Œæ‰§è¡Œ<code>p = (t != (t = tail)) ? t : head;</code>ï¼Œæ­¤æ—¶çš„<code>p = head</code>ï¼Œç»§ç»­ä»å¤´èŠ‚ç‚¹å¼€å§‹å¾ªç¯æ’å…¥å°¾èŠ‚ç‚¹ã€‚è‡³æ­¤ä¸¤ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œå®Œæ¯•ã€‚</li>
</ol>
<p><img src="https://image.leejay.top/image/20200710/qsxlf6aucyH7.png?imageslim" alt=""></p>
</li>
</ol>
</blockquote>
<h3 id="pollæ‰§è¡Œæµç¨‹">pollæ‰§è¡Œæµç¨‹</h3>
<p><img src="https://image.leejay.top/image/20200710/8Pn7oKJw2R07.jpg?imageslim" alt=""></p>
<hr>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<ul>
<li><code>ConcurrentlinkedQueue</code>æ˜¯<code>éé˜»å¡é˜Ÿåˆ—</code>ï¼Œåº•å±‚ä½¿ç”¨<code>è‡ªæ—‹å’ŒCAS</code>æ¥å®ç°ï¼Œ<code>FIFO</code>ä¸”ä¸å…è®¸<code>null</code>å€¼ã€‚</li>
<li><code>ConcurrentlinkedQueue</code>å…ƒç´ å…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œéƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†<code>éå†ä¸æ˜¯çš„çº¿ç¨‹å®‰å…¨çš„</code>ï¼Œå¹¶ä¸”åœ¨åˆ¤æ–­å…ƒç´ æ˜¯å¦ä¸ºç©ºçš„æ—¶å€™å»ºè®®ä½¿ç”¨<code>isEmpty</code>è€Œä¸æ˜¯<code>sze == 0ï¼ˆéå†é˜Ÿåˆ—ï¼‰</code></li>
<li><code>ConcurrentlinkedQueue</code>ä¸­çš„<code>headå’Œtail</code>èŠ‚ç‚¹éƒ½æ˜¯å»¶è¿Ÿæ›´æ–°ï¼Œé‡‡ç”¨çš„æ˜¯<code>HOPS</code>ç­–ç•¥ï¼Œå¦‚æœæ¯æ¬¡èŠ‚ç‚¹å…¥é˜Ÿéƒ½æ›´æ–°å¤´å°¾èŠ‚ç‚¹ï¼Œç¡®å®ä»£ç æ›´å¥½ç†è§£ï¼Œå½“æ—¶æ‰§è¡Œå¤§é‡CASæ“ä½œå¯¹æ€§èƒ½ä¹Ÿæ˜¯æŸè€—ï¼Œ<code>é‡‡ç”¨å¤§é‡è¯»çš„æ“ä½œæ¥æ›¿ä»£æ¯æ¬¡èŠ‚ç‚¹å…¥é˜Ÿéƒ½å†™çš„æ“ä½œï¼Œä»¥æ­¤æå‡æ€§èƒ½ã€‚</code></li>
<li>ç›¸æ¯”<code>LinkedBlockingQueue</code>é˜»å¡é˜Ÿåˆ—ï¼Œ<code>ConcurrentlinkedQueue</code>éé˜»å¡é˜Ÿåˆ—çš„å¹¶å‘æ€§èƒ½æ›´å¥½äº›ã€‚å½“æ—¶å…·ä½“ä½¿ç”¨åœºæ™¯å…·ä½“åˆ†æã€‚</li>
</ul>

    </div>
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h">å…¶ä»–æ–‡ç« </span>
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="https://leejay.top/post/concurrenthashmap/">
                  <span class="button__icon">â†</span>
                  <span class="button__text">ConcurrentHashMap</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="https://leejay.top/post/copyonwritearraylist/">
                  <span class="button__text">CopyOnWriteArrayList</span>
                  <span class="button__icon">â†’</span>
                </a>
              </span>
            
          </div>
        </div>
      
    


    
      
        

      
    

    </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">è‹ICPå¤‡18050258å·-1</div>
    
  </div>
</footer>

<script src="https://leejay.top/assets/main.js"></script>
<script src="https://leejay.top/assets/prism.js"></script>


      
    </div>

    
  </body>
</html>
