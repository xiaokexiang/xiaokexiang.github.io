<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>äºŒå‰å †æ—¶é—´å¤æ‚åº¦åˆ†æ :: é»„æ˜ç°ç™½éª¨ â€” Just a normal blog</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="äºŒå‰å †æ¦‚å¿µ äºŒå‰å †æœ¬è´¨ä¸Šæ˜¯ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ï¼Œå®ƒçš„æ ¹èŠ‚ç‚¹åˆå«åšå †é¡¶ã€‚äºŒå‰å †åˆ†ä¸ºï¼š
 æœ€å¤§å †ï¼šæœ€å¤§å †çš„ä»»ä½•ä¸€ä¸ªçˆ¶èŠ‚ç‚¹çš„å€¼ï¼Œéƒ½å¤§äºæˆ–ç­‰äºå®ƒå·¦ã€å³èŠ‚ç‚¹çš„å€¼ã€‚
æœ€å°å †ï¼šæœ€å°å †çš„ä»»ä½•ä¸€ä¸ªçˆ¶èŠ‚ç‚¹çš„å€¼ï¼Œéƒ½å°äºæˆ–ç­‰äºå®ƒå·¦ã€å³èŠ‚ç‚¹çš„å€¼ã€‚
 æ ¹æ®å®šä¹‰å¯ä»¥æ¨å¯¼å‡ºï¼ŒäºŒå‰å †çš„å †é¡¶å­˜æ”¾çš„æ˜¯è¿™æ£µæ ‘çš„æœ€å¤§æˆ–æœ€å°å…ƒç´ ã€‚
æˆ‘ä»¬é‡‡ç”¨æ•°ç»„(ç‰©ç†ç»“æ„)æ„å»ºäºŒå‰å †(é€»è¾‘ç»“æ„)ï¼ŒäºŒå‰å †çš„å…ƒç´ æ»¡è¶³ä»¥ä¸‹ç‰¹æ€§ï¼š
 å‡è®¾çˆ¶èŠ‚ç‚¹çš„indexä¸º0(è®°ä¸ºi=0)ï¼Œé‚£ä¹ˆå®ƒçš„å·¦å­èŠ‚ç‚¹indexä¸º2n &#43; 1ï¼Œå³å­èŠ‚ç‚¹indexä¸º2n &#43; 2ã€‚
åŒæ ·ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹çš„index=0ï¼Œé‚£ä¹ˆå®ƒçš„çˆ¶èŠ‚ç‚¹indexä¸º(i-1)/2 æˆ– (i-2)/2ï¼Œå–å†³äºi % 2 == 0æ˜¯å¦æˆç«‹ã€‚
  Javaä¸­çš„PriorityBlockingQueueåº•å±‚å°±æ˜¯ä½¿ç”¨æœ€å°äºŒå‰å †çš„é€»è¾‘ç»“æ„å®ç°çš„ã€‚
  äºŒå‰å †æ¨å¯¼ æ„å»º å¯¹äºäºŒå‰å †çš„æ„å»ºï¼Œæˆ‘ä»¬é€‰æ‹©æœ€å°äºŒå‰å †æ¨å¯¼ï¼Œå¯¹äºæœ€å°äºŒå‰å †æ„å»ºå­˜åœ¨ä¸¤ç§æ€è·¯ï¼š
 æˆ‘ä»¬ä»æ•°ç»„é˜Ÿå°¾å¼€å§‹éå†ï¼Œå°†å½“å‰å…ƒç´ å’Œå®ƒçš„æ‰€æœ‰çˆ¶çˆ·èŠ‚ç‚¹æ¯”è¾ƒäº¤æ¢ï¼Œç›´åˆ°å½“å‰å…ƒç´ çš„æœ€é¡¶å±‚çˆ¶èŠ‚ç‚¹ã€‚ç›´åˆ°æ•°ç»„éå†å®Œæ¯•ã€‚  // è®¡ç®—å½“å‰indexçš„çˆ¶èŠ‚ç‚¹index int prev(int c) { return c % 2 != 0 ? (c - 1) &amp;gt;&amp;gt;&amp;gt; 1 : (c - 2) &amp;gt;&amp;gt;&amp;gt; 1; } private int[] build(int[] array) { // è®¡ç®—é˜Ÿå°¾èŠ‚ç‚¹index  int last = array.length - 1; // ä»é˜Ÿå°¾å¼€å§‹å¾€å‰æ¯”è¾ƒ,é˜Ÿé¦–ä¸éœ€è¦æ¯”è¾ƒ  for (int i = last; i &amp;gt; 0; i--) { int c = i; int p = prev(c); // å¦‚æœå½“å‰èŠ‚ç‚¹å°äºçˆ¶èŠ‚ç‚¹ï¼Œé‚£ä¹ˆç»§ç»­å¾ªç¯æ¯”è¾ƒ  while (array[c] &amp;lt; array[p]) { // äº¤æ¢ä½ç½®å’Œindex  int temp = array[p]; array[p] = array[c]; array[c] = temp; c = p; p = prev(c); // è·³å‡ºå¾ªç¯çš„æ¡ä»¶:parentIndex&amp;lt;0  if (p &amp;lt; 0) { break; } } } return array; }  è¯¥æ–¹æ³•æ—¶é—´å¤æ‚åº¦ï¼šæˆ‘ä»¬å‡è®¾æ•°ç»„æœ‰nä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆä¸€å…±éœ€è¦åˆ¤æ–­n-1ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šäº¤æ¢lognæ¬¡(å³æ ‘é«˜åº¦)ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸ºï¼šO(nlogn)ã€‚"/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://xiaokexiang.github.io/post/%E4%BA%8C%E5%8F%89%E5%A0%86%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90/" />





<link rel="stylesheet" href="https://xiaokexiang.github.io/assets/style.css">


<link rel="stylesheet" href="https://xiaokexiang.github.io/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://xiaokexiang.github.io/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="https://xiaokexiang.github.io/img/favicon.png">



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="äºŒå‰å †æ—¶é—´å¤æ‚åº¦åˆ†æ"/>
<meta name="twitter:description" content="äºŒå‰å †çš„æœ¬è´¨ä¸Šæ˜¯ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ã€‚æ ¹èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯è¿™é¢—æ ‘çš„æœ€å¤§æˆ–æœ€å°å…ƒç´ ã€‚"/>



<meta property="og:title" content="äºŒå‰å †æ—¶é—´å¤æ‚åº¦åˆ†æ" />
<meta property="og:description" content="äºŒå‰å †çš„æœ¬è´¨ä¸Šæ˜¯ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ã€‚æ ¹èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯è¿™é¢—æ ‘çš„æœ€å¤§æˆ–æœ€å°å…ƒç´ ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xiaokexiang.github.io/post/%E4%BA%8C%E5%8F%89%E5%A0%86%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90/" />
<meta property="article:published_time" content="2020-08-01T11:10:01+08:00" />
<meta property="article:modified_time" content="2020-08-01T11:10:01+08:00" /><meta property="og:site_name" content="é»„æ˜ç°ç™½éª¨" />






  </head>
  <body class="">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a href="https://xiaokexiang.github.io" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="https://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367"/>
</svg></span>
    <span class="logo__text">é»„æ˜ç°ç™½éª¨</span>
    <span class="logo__cursor"></span>
    <span class="logo__cursor2"></span>
  
</a>
    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/categories">Categories</a></li>
        
      
        
          <li><a href="/tags">Tags</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/categories">Categories</a></li>
      
    
      
        <li><a href="/tags">Tags</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="https://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <div class="post">
    <h1 class="post-title"><a href="https://xiaokexiang.github.io/post/%E4%BA%8C%E5%8F%89%E5%A0%86%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90/">äºŒå‰å †æ—¶é—´å¤æ‚åº¦åˆ†æ</a></h1>
    <div class="post-meta">
      
        <span class="post-date">
          2020-08-01
        </span>

        
          
        
      

      
      
    </div>

    
      <span class="post-tags">
        
        ğŸ–<a href="https://xiaokexiang.github.io/tags/binarydump/">BinaryDump </a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      
      <h3 id="äºŒå‰å †æ¦‚å¿µ">äºŒå‰å †æ¦‚å¿µ</h3>
<p>äºŒå‰å †æœ¬è´¨ä¸Šæ˜¯ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ï¼Œå®ƒçš„æ ¹èŠ‚ç‚¹åˆå«åš<code>å †é¡¶</code>ã€‚äºŒå‰å †åˆ†ä¸ºï¼š</p>
<blockquote>
<p>æœ€å¤§å †ï¼šæœ€å¤§å †çš„ä»»ä½•ä¸€ä¸ªçˆ¶èŠ‚ç‚¹çš„å€¼ï¼Œ<code>éƒ½å¤§äºæˆ–ç­‰äº</code>å®ƒå·¦ã€å³èŠ‚ç‚¹çš„å€¼ã€‚</p>
<p>æœ€å°å †ï¼šæœ€å°å †çš„ä»»ä½•ä¸€ä¸ªçˆ¶èŠ‚ç‚¹çš„å€¼ï¼Œ<code>éƒ½å°äºæˆ–ç­‰äº</code>å®ƒå·¦ã€å³èŠ‚ç‚¹çš„å€¼ã€‚</p>
</blockquote>
<p>æ ¹æ®å®šä¹‰å¯ä»¥æ¨å¯¼å‡ºï¼ŒäºŒå‰å †çš„<code>å †é¡¶</code>å­˜æ”¾çš„æ˜¯è¿™æ£µæ ‘çš„<code>æœ€å¤§æˆ–æœ€å°</code>å…ƒç´ ã€‚</p>
<p>æˆ‘ä»¬é‡‡ç”¨<code>æ•°ç»„(ç‰©ç†ç»“æ„)</code>æ„å»º<code>äºŒå‰å †(é€»è¾‘ç»“æ„)</code>ï¼ŒäºŒå‰å †çš„å…ƒç´ æ»¡è¶³ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<blockquote>
<p>å‡è®¾çˆ¶èŠ‚ç‚¹çš„indexä¸º0(<code>è®°ä¸ºi=0</code>)ï¼Œé‚£ä¹ˆå®ƒçš„å·¦å­èŠ‚ç‚¹indexä¸º<code>2n + 1</code>ï¼Œå³å­èŠ‚ç‚¹indexä¸º<code>2n + 2</code>ã€‚</p>
<p>åŒæ ·ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹çš„index=0ï¼Œé‚£ä¹ˆå®ƒçš„çˆ¶èŠ‚ç‚¹indexä¸º<code>(i-1)/2 æˆ– (i-2)/2</code>ï¼Œå–å†³äº<code>i % 2 == 0</code>æ˜¯å¦æˆç«‹ã€‚</p>
</blockquote>
<p><img src="https://image.leejay.top/FmJ38KrBpAMKg5pqdcufzJmU0TcF" alt=""></p>
<blockquote>
<p>Javaä¸­çš„<code>PriorityBlockingQueue</code>åº•å±‚å°±æ˜¯ä½¿ç”¨<code>æœ€å°äºŒå‰å †</code>çš„é€»è¾‘ç»“æ„å®ç°çš„ã€‚</p>
</blockquote>
<hr>
<h3 id="äºŒå‰å †æ¨å¯¼">äºŒå‰å †æ¨å¯¼</h3>
<h4 id="æ„å»º">æ„å»º</h4>
<p>å¯¹äºäºŒå‰å †çš„æ„å»ºï¼Œæˆ‘ä»¬é€‰æ‹©<code>æœ€å°äºŒå‰å †</code>æ¨å¯¼ï¼Œå¯¹äºæœ€å°äºŒå‰å †æ„å»ºå­˜åœ¨ä¸¤ç§æ€è·¯ï¼š</p>
<ul>
<li>æˆ‘ä»¬ä»æ•°ç»„é˜Ÿå°¾å¼€å§‹éå†ï¼Œå°†å½“å‰å…ƒç´ å’Œå®ƒçš„æ‰€æœ‰çˆ¶çˆ·èŠ‚ç‚¹æ¯”è¾ƒäº¤æ¢ï¼Œç›´åˆ°å½“å‰å…ƒç´ çš„æœ€é¡¶å±‚çˆ¶èŠ‚ç‚¹ã€‚ç›´åˆ°æ•°ç»„éå†å®Œæ¯•ã€‚</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// è®¡ç®—å½“å‰indexçš„çˆ¶èŠ‚ç‚¹index
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">prev</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> c<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> c <span style="color:#f92672">%</span> 2 <span style="color:#f92672">!=</span> 0 <span style="color:#f92672">?</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1 <span style="color:#f92672">:</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">-</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">build</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// è®¡ç®—é˜Ÿå°¾èŠ‚ç‚¹index
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> last <span style="color:#f92672">=</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#75715e">// ä»é˜Ÿå°¾å¼€å§‹å¾€å‰æ¯”è¾ƒ,é˜Ÿé¦–ä¸éœ€è¦æ¯”è¾ƒ
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> last<span style="color:#f92672">;</span> i <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">;</span> i<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> c <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">int</span> p <span style="color:#f92672">=</span> prev<span style="color:#f92672">(</span>c<span style="color:#f92672">);</span>
        <span style="color:#75715e">// å¦‚æœå½“å‰èŠ‚ç‚¹å°äºçˆ¶èŠ‚ç‚¹ï¼Œé‚£ä¹ˆç»§ç»­å¾ªç¯æ¯”è¾ƒ
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>array<span style="color:#f92672">[</span>c<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> array<span style="color:#f92672">[</span>p<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// äº¤æ¢ä½ç½®å’Œindex
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">int</span> temp <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>p<span style="color:#f92672">];</span>
            array<span style="color:#f92672">[</span>p<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>c<span style="color:#f92672">];</span>
            array<span style="color:#f92672">[</span>c<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> temp<span style="color:#f92672">;</span>
            c <span style="color:#f92672">=</span> p<span style="color:#f92672">;</span>
            p <span style="color:#f92672">=</span> prev<span style="color:#f92672">(</span>c<span style="color:#f92672">);</span>
            <span style="color:#75715e">// è·³å‡ºå¾ªç¯çš„æ¡ä»¶:parentIndex&lt;0
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>p <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> array<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<p>è¯¥æ–¹æ³•æ—¶é—´å¤æ‚åº¦ï¼šæˆ‘ä»¬å‡è®¾æ•°ç»„æœ‰<code>n</code>ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆä¸€å…±éœ€è¦åˆ¤æ–­<code>n-1</code>ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ æœ€å¤šäº¤æ¢<code>logn</code>æ¬¡(å³æ ‘é«˜åº¦)ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸ºï¼š<code>O(nlogn)</code>ã€‚</p>
</blockquote>
<ul>
<li>ä»éå¶å­èŠ‚ç‚¹<code>(å€’æ•°ç¬¬äºŒå±‚)</code>æœ€åä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹å€’åºéå†ï¼Œè®©å½“å‰èŠ‚ç‚¹ä¾æ¬¡å’Œå®ƒä¸‹é¢çš„å­èŠ‚ç‚¹æ¯”è¾ƒï¼Œæœ€å°å…ƒç´ ä½œä¸ºçˆ¶èŠ‚ç‚¹ï¼Œç›´åˆ°å †é¡¶ã€‚</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">buildFast</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> size<span style="color:#f92672">;</span>
    <span style="color:#75715e">// ä»éå¶å­èŠ‚ç‚¹å¼€å§‹éå†ï¼Œä»åå¾€å‰éå†
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>size <span style="color:#f92672">=</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span> i <span style="color:#f92672">&gt;=</span> 0<span style="color:#f92672">;</span> i<span style="color:#f92672">--)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
        <span style="color:#75715e">// éå†æŸ¥æ‰¾å½“å‰indexçš„å·¦å³èŠ‚ç‚¹æ˜¯å¦éƒ½å°äºå½“å‰èŠ‚ç‚¹
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// é€€å‡ºæ¡ä»¶ï¼šå½“å‰èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹indexè¶…è¿‡æ•°ç»„å¤§å°
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">while</span> <span style="color:#f92672">(</span>k <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> le <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>k <span style="color:#f92672">&lt;&lt;</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
            <span style="color:#66d9ef">int</span> rt <span style="color:#f92672">=</span> le <span style="color:#f92672">+</span> 1<span style="color:#f92672">;</span>
            <span style="color:#75715e">// å·¦å³å­èŠ‚ç‚¹æ¯”è¾ƒå¤§å°
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">int</span> min <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">min</span><span style="color:#f92672">(</span>array<span style="color:#f92672">[</span>le<span style="color:#f92672">],</span> array<span style="color:#f92672">[</span>rt<span style="color:#f92672">]);</span>
            <span style="color:#75715e">// å¦‚æœå½“å‰èŠ‚ç‚¹å¤§äºå­èŠ‚ç‚¹ä¸­çš„æœ€å°èŠ‚ç‚¹ï¼Œé‚£ä¹ˆéœ€è¦ç§»ä½
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>array<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> min<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">int</span> temp <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>k<span style="color:#f92672">];</span>
                array<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> min<span style="color:#f92672">;</span>
                <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>array<span style="color:#f92672">[</span>le<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>rt<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                    array<span style="color:#f92672">[</span>rt<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> temp<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                    array<span style="color:#f92672">[</span>le<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> temp<span style="color:#f92672">;</span>
                <span style="color:#f92672">}</span>
            <span style="color:#f92672">}</span>
            <span style="color:#75715e">// ç»§ç»­åˆ¤æ–­ç›´åˆ°å·¦å³èŠ‚ç‚¹æº¢å‡º
</span><span style="color:#75715e"></span>            k <span style="color:#f92672">=</span> rt<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> array<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<p>å…ˆè¯´ç»“è®ºå†è¯æ˜ï¼Œè¯¥æ–¹æ³•æ—¶é—´å¤æ‚åº¦ï¼š<code>O(n)</code>ã€‚</p>
<p>åŸºäºç¬¬äºŒç§æ„å»ºæ€è·¯å¯çŸ¥ï¼š<code>åŒä¸€å±‚</code>çš„èŠ‚ç‚¹çš„<code>æœ€å¤šäº¤æ¢æ¬¡æ•°æ˜¯ç›¸åŒ</code>çš„ï¼Œæœ€åä¸€å±‚çš„<code>å¶å­èŠ‚ç‚¹</code>ä¸éœ€è¦æ‰§è¡Œäº¤æ¢ï¼Œå› ä¸ºå®ƒçš„ä¸‹é¢æ²¡æœ‰èŠ‚ç‚¹äº†ã€‚æ—¶é—´å¤æ‚åº¦å³ä¸ºï¼š<code>O(sum(äº¤æ¢æ¬¡æ•°)) = O(æ¯å±‚èŠ‚ç‚¹æ•° * è¯¥å±‚èŠ‚ç‚¹çš„æœ€å¤šäº¤æ¢æ¬¡æ•°)</code>ã€‚</p>
<p>æ¨å¯¼ï¼š</p>
<p>å‡è®¾æ•°ç»„é•¿åº¦ä¸º<code>n</code>ï¼Œé‚£ä¹ˆæ ‘é«˜<code>k = logn</code>ï¼Œ<code>sum()</code>è¡¨ç¤ºä¸º<code>æ€»çš„äº¤æ¢æ¬¡æ•°</code>ã€‚</p>
<ol>
<li>ç¬¬ä¸€å±‚æœ‰1ä¸ªèŠ‚ç‚¹ï¼Œç¬¬äºŒå±‚æœ‰2ä¸ªèŠ‚ç‚¹ï¼Œç¬¬ä¸‰å±‚æœ‰4ä¸ªèŠ‚ç‚¹ &hellip; ç¬¬kå±‚æœ‰2^(k-1)ä¸ªèŠ‚ç‚¹ã€‚</li>
<li>ç¬¬ä¸€å±‚èŠ‚ç‚¹éœ€è¦äº¤æ¢k-1æ¬¡ï¼Œç¬¬äºŒå±‚èŠ‚ç‚¹éœ€è¦äº¤æ¢k-2æ¬¡&hellip;ç¬¬kå±‚éœ€è¦äº¤æ¢0æ¬¡(å¶å­èŠ‚ç‚¹)ã€‚</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">sum<span style="color:#f92672">()</span> <span style="color:#f92672">=</span> 1 <span style="color:#f92672">*</span> <span style="color:#f92672">(</span>k<span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 2 <span style="color:#f92672">*</span> <span style="color:#f92672">(</span>k<span style="color:#f92672">-</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#f92672">...+</span> 2<span style="color:#f92672">^(</span>k<span style="color:#f92672">-</span>3<span style="color:#f92672">)</span> <span style="color:#f92672">*</span> 2 <span style="color:#f92672">+</span> 2<span style="color:#f92672">^(</span>k<span style="color:#f92672">-</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">*</span> 1 <span style="color:#f92672">+</span> 2<span style="color:#f92672">^(</span>k<span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">*</span> 0
<span style="color:#a6e22e">sum</span><span style="color:#f92672">()</span> <span style="color:#f92672">=</span> 1 <span style="color:#f92672">*</span> <span style="color:#f92672">(</span>k<span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 2 <span style="color:#f92672">*</span> <span style="color:#f92672">(</span>k<span style="color:#f92672">-</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#f92672">...+</span> 2<span style="color:#f92672">^(</span>k<span style="color:#f92672">-</span>3<span style="color:#f92672">)</span> <span style="color:#f92672">*</span> 2 <span style="color:#f92672">+</span> 2<span style="color:#f92672">^(</span>k<span style="color:#f92672">-</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">*</span> 1
<span style="color:#a6e22e">sum</span><span style="color:#f92672">()</span> <span style="color:#f92672">=</span> 2<span style="color:#f92672">^</span>0 <span style="color:#f92672">*</span> <span style="color:#f92672">(</span>k<span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 2<span style="color:#f92672">^</span>1 <span style="color:#f92672">*</span> <span style="color:#f92672">(</span>k<span style="color:#f92672">-</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">+...+</span> 2<span style="color:#f92672">^(</span>k<span style="color:#f92672">-</span>3<span style="color:#f92672">)</span> <span style="color:#f92672">*</span> 2 <span style="color:#f92672">+</span> 2<span style="color:#f92672">^(</span>k<span style="color:#f92672">-</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">*</span> 1  <span style="color:#960050;background-color:#1e0010">â‘ </span> 
2sum<span style="color:#f92672">()</span> <span style="color:#f92672">=</span> 2<span style="color:#f92672">^</span>1 <span style="color:#f92672">*</span> <span style="color:#f92672">(</span>k<span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 2<span style="color:#f92672">^</span>2 <span style="color:#f92672">*</span> <span style="color:#f92672">(</span>k<span style="color:#f92672">-</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> <span style="color:#f92672">...</span> <span style="color:#f92672">+</span> 2<span style="color:#f92672">^(</span>k<span style="color:#f92672">-</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">*</span> 2 <span style="color:#f92672">+</span> 2<span style="color:#f92672">^(</span>k<span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">*</span> 1  <span style="color:#960050;background-color:#1e0010">â‘¡</span>
é”™ä½ç›¸å‡
<span style="color:#a6e22e">sum</span><span style="color:#f92672">()</span> <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">â‘¡</span> <span style="color:#f92672">-</span> <span style="color:#960050;background-color:#1e0010">â‘ </span> <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>2<span style="color:#f92672">^</span>0 <span style="color:#f92672">*</span> <span style="color:#f92672">(</span>k<span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 2<span style="color:#f92672">^</span>1 <span style="color:#f92672">+</span> 2<span style="color:#f92672">^</span>2 <span style="color:#f92672">+</span> <span style="color:#f92672">...</span> <span style="color:#f92672">+</span> 2<span style="color:#f92672">^(</span>k<span style="color:#f92672">-</span>2<span style="color:#f92672">)</span> <span style="color:#f92672">*</span> 1 <span style="color:#f92672">+</span> 2<span style="color:#f92672">^(</span>k<span style="color:#f92672">-</span>1<span style="color:#f92672">)</span> <span style="color:#f92672">*</span> 1
<span style="color:#a6e22e">sum</span><span style="color:#f92672">()</span> <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>k <span style="color:#f92672">+</span> 1 <span style="color:#f92672">+</span> 2 <span style="color:#f92672">+</span> 4 <span style="color:#f92672">+</span> <span style="color:#f92672">...</span> <span style="color:#f92672">+</span> 2<span style="color:#f92672">^(</span>k<span style="color:#f92672">-</span>1<span style="color:#f92672">)</span>
ç­‰æ¯”æ•°åˆ—æ±‚å’Œ
<span style="color:#a6e22e">sum</span><span style="color:#f92672">()</span> <span style="color:#f92672">=</span> 2<span style="color:#f92672">^</span>k <span style="color:#f92672">-</span> k <span style="color:#f92672">-</span> 1
k <span style="color:#f92672">=</span> lognä»£å…¥
<span style="color:#a6e22e">sum</span><span style="color:#f92672">(</span>n<span style="color:#f92672">)</span> <span style="color:#f92672">=</span> n <span style="color:#f92672">-</span> log2n <span style="color:#f92672">-</span> 1
</code></pre></div><p>æ‰€ä»¥æ­¤æ–¹æ³•çš„ç®—æ³•å¤æ‚åº¦ä¸º <code>O(n)</code>ã€‚</p>
</blockquote>
<hr>
<h4 id="æ·»åŠ ">æ·»åŠ </h4>
<p>äºŒå‰å †çš„æ·»åŠ ï¼Œéƒ½æ˜¯å°†<code>å…ƒç´ æ·»åŠ åˆ°é˜Ÿå°¾</code>ï¼Œå› ä¸ºæ­¤æ—¶æ•°ç»„å·²ç»æ˜¯ç¬¦åˆäºŒå‰å †è¦æ±‚çš„æœ€å°äºŒå‰å †ï¼Œæ‰€ä»¥åªéœ€è¦å¤„ç†æ–°æ·»åŠ çš„å…ƒç´ ï¼Œå’Œæ–°åŠ å…ƒç´ çš„æ‰€æœ‰çˆ¶èŠ‚ç‚¹æ¯”è¾ƒæ›¿æ¢ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">add</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// æˆ‘ä»¬å…ˆä½¿ç”¨System.arraycopyå¤åˆ¶åŸæœ‰æ•°æ®å¹¶å°†æ–°å…ƒç´ åŠ å…¥
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> arr <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>size <span style="color:#f92672">+</span> 1<span style="color:#f92672">];</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>array<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> arr<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> size<span style="color:#f92672">);</span>
    arr<span style="color:#f92672">[</span>size<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> i<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">return</span> siftUp<span style="color:#f92672">(</span>arr<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
<span style="color:#75715e">// è·å–å½“å‰indexçš„çˆ¶èŠ‚ç‚¹index
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">prev</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> c<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">return</span> c <span style="color:#f92672">%</span> 2 <span style="color:#f92672">!=</span> 0 <span style="color:#f92672">?</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">-</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1 <span style="color:#f92672">:</span> <span style="color:#f92672">(</span>c <span style="color:#f92672">-</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;&gt;&gt;</span> 1<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
<span style="color:#75715e">/**
</span><span style="color:#75715e">  * ä»å †åº•å¾€ä¸Šæ›¿æ¢
</span><span style="color:#75715e">  * æ—¶é—´å¤æ‚åº¦ï¼š O(logn)
</span><span style="color:#75715e">  *
</span><span style="color:#75715e">  * @param array é»˜è®¤æ–°å¢å…ƒç´ åœ¨é˜Ÿå°¾
</span><span style="color:#75715e">  * @return æ·»åŠ åçš„æœ€å°äºŒå‰å †
</span><span style="color:#75715e">  */</span>
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">siftUp</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#75715e">// è·å–æ–°åŠ å…¥å…ƒç´ çš„index,å³é˜Ÿå°¾
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> last <span style="color:#f92672">=</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> 1<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> prev<span style="color:#f92672">;</span>
    <span style="color:#75715e">// åªè¦çˆ¶èŠ‚ç‚¹çš„index&gt; 0ï¼Œè¯´æ˜æ­¤æ—¶è¿˜å­˜åœ¨çˆ¶èŠ‚ç‚¹æˆ–çˆ·èŠ‚ç‚¹
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>prev <span style="color:#f92672">=</span> prev<span style="color:#f92672">(</span>last<span style="color:#f92672">))</span> <span style="color:#f92672">&gt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// åªè¦å½“å‰èŠ‚ç‚¹å°äºçˆ¶èŠ‚ç‚¹çš„å€¼ï¼Œé‚£ä¹ˆå°±äº¤æ¢
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>array<span style="color:#f92672">[</span>last<span style="color:#f92672">]</span> <span style="color:#f92672">&lt;</span> array<span style="color:#f92672">[</span>prev<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> temp <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>prev<span style="color:#f92672">];</span>
            array<span style="color:#f92672">[</span>prev<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>last<span style="color:#f92672">];</span>
            array<span style="color:#f92672">[</span>last<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> temp<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// å°†å½“å‰èŠ‚ç‚¹çš„indexæ¢ä¸ºçˆ¶èŠ‚ç‚¹çš„indexï¼Œç»§ç»­å¾ªç¯
</span><span style="color:#75715e"></span>        last <span style="color:#f92672">=</span> prev<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> array<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<p>æ— è®ºæ•°ç»„å¤§å°æ˜¯å¤šå°‘ï¼Œåªéœ€è¦å¤„ç†æ–°åŠ å…¥é‚£ä¸ªçš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”è¯¥å…ƒç´ æœ€å¤šäº¤æ¢<code>logn</code>æ¬¡ï¼ˆå³æ ‘é«˜ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºï¼šO(1 * logn) = <code>O(logn)</code>ã€‚</p>
</blockquote>
<hr>
<h4 id="ç§»é™¤">ç§»é™¤</h4>
<p>å› ä¸ºäºŒå‰å †çš„ç‰¹æ€§ï¼š<code>å †é¡¶æ˜¯æ•´ä¸ªæ ‘æœ€å¤§æˆ–æœ€å°çš„å…ƒç´ </code>ã€‚æ‰€ä»¥ç§»é™¤å…ƒç´ éƒ½ç›´æ¥<code>ç§»é™¤å †é¡¶</code>ï¼Œç„¶åå°†<code>é˜Ÿå°¾å…ƒç´ ç›´æ¥ç§»åˆ°å †é¡¶</code>ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦ä»<code>å †é¡¶å¼€å§‹å¾€ä¸‹</code>æ¯”è¾ƒäº¤æ¢ã€‚å’Œæ·»åŠ ä¸ä¸€æ ·ï¼Œæ·»åŠ æ˜¯ä»<code>å †åº•å¾€ä¸Š</code>æ¯”è¾ƒäº¤æ¢ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e">  * ç§»é™¤é˜Ÿé¦–å…ƒç´ ï¼Œå°†é˜Ÿå°¾å…ƒç´ ç§»åˆ°é˜Ÿé¦–ï¼Œå†é‡æ–°æ„å»º
</span><span style="color:#75715e">  */</span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">delete</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> first <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>0<span style="color:#f92672">];</span>
    <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> arr <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[</span>size <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
    <span style="color:#75715e">// å°†é˜Ÿå°¾ç§»åˆ°é˜Ÿé¦–
</span><span style="color:#75715e"></span>    array<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>size <span style="color:#f92672">-</span> 1<span style="color:#f92672">];</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">arraycopy</span><span style="color:#f92672">(</span>array<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> arr<span style="color:#f92672">,</span> 0<span style="color:#f92672">,</span> size <span style="color:#f92672">-</span> 1<span style="color:#f92672">);</span>
    siftDown<span style="color:#f92672">(</span>arr<span style="color:#f92672">);</span>
    <span style="color:#66d9ef">return</span> first<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
<span style="color:#75715e">/**
</span><span style="color:#75715e">  * ä»å †é¡¶å¾€å †åº•éå†ï¼Œä¾æ¬¡å’Œå·¦å³å­èŠ‚ç‚¹ä¸­è¾ƒå°çš„äº¤æ¢
</span><span style="color:#75715e">  * åŒæ ·çš„ä»ä¸Šå¾€ä¸‹æ›¿æ¢ï¼Œæœ€å¤šå¤„ç†O(æ ‘é«˜)æ¬¡ -&gt; O(logn)
</span><span style="color:#75715e">  * æ—¶é—´å¤æ‚åº¦ï¼š O(logn)
</span><span style="color:#75715e">  *
</span><span style="color:#75715e">  * @param index è¢«åˆ é™¤çš„å…ƒç´ index
</span><span style="color:#75715e">  * @return åˆ é™¤åçš„æœ€å°äºŒå‰å †
</span><span style="color:#75715e">  */</span>
<span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> <span style="color:#a6e22e">siftDown</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> index<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> array<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> index<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> size <span style="color:#f92672">=</span> array<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">;</span>
    <span style="color:#66d9ef">int</span> le<span style="color:#f92672">,</span> rt<span style="color:#f92672">;</span>
     <span style="color:#75715e">// åªè¦å½“å‰èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹å°äºsizeå°±ç»§ç»­å¾ªç¯
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">while</span> <span style="color:#f92672">((</span>le <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>k <span style="color:#f92672">&lt;&lt;</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">&lt;</span> size<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// å­˜åœ¨å·¦èŠ‚ç‚¹æ²¡è¶Šç•Œï¼Œä½†å³èŠ‚ç‚¹è¶Šç•Œæƒ…å†µ
</span><span style="color:#75715e"></span>        <span style="color:#75715e">// æ­¤æ—¶å½“å‰èŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå·¦èŠ‚ç‚¹ï¼Œéœ€è¦å½“å‰èŠ‚ç‚¹å’Œå·¦èŠ‚ç‚¹æ¯”è¾ƒ
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">((</span>rt <span style="color:#f92672">=</span> le <span style="color:#f92672">+</span> 1<span style="color:#f92672">)</span> <span style="color:#f92672">&gt;=</span> size <span style="color:#f92672">&amp;&amp;</span> array<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>le<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">int</span> temp <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>le<span style="color:#f92672">];</span>
            array<span style="color:#f92672">[</span>le<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>k<span style="color:#f92672">];</span>
            array<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> temp<span style="color:#f92672">;</span>
            k <span style="color:#f92672">=</span> le<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            <span style="color:#75715e">// æ­¤æ—¶è¯´æ˜å·¦å³èŠ‚ç‚¹éƒ½å­˜åœ¨
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">int</span> min <span style="color:#f92672">=</span> Math<span style="color:#f92672">.</span><span style="color:#a6e22e">min</span><span style="color:#f92672">(</span>array<span style="color:#f92672">[</span>le<span style="color:#f92672">],</span> array<span style="color:#f92672">[</span>rt<span style="color:#f92672">]);</span>
            <span style="color:#66d9ef">int</span> temp <span style="color:#f92672">=</span> array<span style="color:#f92672">[</span>k<span style="color:#f92672">];</span>
            array<span style="color:#f92672">[</span>k<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> min<span style="color:#f92672">;</span>
            <span style="color:#75715e">// æ³¨æ„è¿™é‡Œçš„indexè¦å’Œå·¦å³å­èŠ‚ç‚¹ä¸­è¾ƒå°çš„äº¤æ¢
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>array<span style="color:#f92672">[</span>le<span style="color:#f92672">]</span> <span style="color:#f92672">&gt;</span> array<span style="color:#f92672">[</span>rt<span style="color:#f92672">])</span> <span style="color:#f92672">{</span>
                array<span style="color:#f92672">[</span>rt<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> temp<span style="color:#f92672">;</span>
                k <span style="color:#f92672">=</span> rt<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
                array<span style="color:#f92672">[</span>le<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> temp<span style="color:#f92672">;</span>
                k <span style="color:#f92672">=</span> le<span style="color:#f92672">;</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
    <span style="color:#66d9ef">return</span> array<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<p>åªéœ€è¦å¤„ç†<code>ç§»åˆ°é˜Ÿé¦–çš„åŸé˜Ÿå°¾å…ƒç´ </code>è¿™ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶æœ€å¤šäº¤æ¢<code>logn</code>æ¬¡ï¼Œæ‰€ä»¥åˆ é™¤çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯<code>O(logn)</code>ã€‚</p>
</blockquote>

    </div>
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h">å…¶ä»–æ–‡ç« </span>
            <hr />
          </div>
          <div class="pagination__buttons">
            
            
              <span class="button next">
                <a href="https://xiaokexiang.github.io/post/future/">
                  <span class="button__text">Future</span>
                  <span class="button__icon">â†’</span>
                </a>
              </span>
            
          </div>
        </div>
      
    


    
      
        

      
    

    </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">è‹ICPå¤‡18050258å·-1</div>
    
  </div>
</footer>

<script src="https://xiaokexiang.github.io/assets/main.js"></script>
<script src="https://xiaokexiang.github.io/assets/prism.js"></script>


      
    </div>

    
  </body>
</html>
